/*
 * This file was generated by the Gradle 'init' task.
 */

plugins {
    id 'java'
    id 'maven-publish'
    id'io.qameta.allure' version '2.11.0'
}

group = 'live.renjujose'
version = '1.0-SNAPSHOT'
description = 'TestFramework'
java.sourceCompatibility = JavaVersion.VERSION_11

dependencies {
    implementation 'com.codeborne:selenide:6.12.4'
    implementation 'io.qameta.allure:allure-selenide:2.17.3'
    implementation 'io.qameta.allure:allure-testng:2.17.3'
    implementation 'org.slf4j:slf4j-simple:1.7.36'
    implementation 'io.rest-assured:rest-assured:4.5.1'
    implementation 'com.fasterxml.jackson.core:jackson-databind:2.13.2'
    implementation 'com.github.javafaker:javafaker:1.0.2'
    implementation 'org.testng:testng:7.5'
    implementation 'org.selenide:selenide-testng:1.0.0'
    implementation 'io.netty:netty-transport-native-epoll:4.1.73.Final'
    implementation 'org.yaml:snakeyaml:1.23'
}

repositories {
    mavenCentral()
    mavenLocal()
    maven{
        url = uri('https://repo1.maven.org/maven2/')
    }
    maven {
        url = uri('https://repo.maven.apache.org/maven2/')
    }
}

tasks.register('copyReportsDirForArchiving', Copy) {
    getLogger().log(LogLevel.WARN,"Copying the reports to the required dir")
    from layout.buildDirectory.dir("reports")
    into layout.buildDirectory.dir("toArchive")
}

test {
    useTestNG {
        preserveOrder true
    }
//    filter {
//        includeTestsMatching "demo.api.tests.*"
//    }
}

// See https://docs.gradle.org/current/dsl/org.gradle.api.reporting.ReportingExtension.html
reporting {
    baseDir = "$buildDir/gradle-reports"
}

allure {
    version = '2.11.0'
//    build\allure-results by default
//    resultsDir = file('/path/to/project/module/build/allure-results')

//    build\reports\allure-report by default
//    reportDir = file('build/reports/allure-report')
    report {
        dependsOnTests.set(true)
    }
}
